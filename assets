
/* AI integráció: Edge Function (Gemini) vagy helyi mock */
window.AI = (function () {
  const C = window.__CONFIG__;
  async function suggest({ title, category, price }) {
    if (C.EDGE_FUNCTION_URL) {
      const res = await fetch(C.EDGE_FUNCTION_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ keywords: title || "", category: category || "", price: String(price || "") })
      });
      if (!res.ok) throw new Error("Edge funkció hiba: " + res.status);
      const js = await res.json().catch(()=>({}));
      return js.description || js.text || "";
    }
    // helyi mock – mindig ad javaslatot
    const base = title || "Termék";
    const parts = [
      `${base} – Megkímélt állapot, azonnal elvihető.`,
      `Kipróbálható átvételkor, személyes átvétel vagy csomagküldés.`,
      price ? `Ár: ${Number(price).toLocaleString("hu-HU")} Ft.` : "",
      category ? `Kategória: ${category}.` : ""
    ].filter(Boolean);
    return parts.join(" ");
  }
  return { suggest };
})();
